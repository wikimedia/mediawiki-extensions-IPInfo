{
	"name": "IPInfo",
	"url": "https://www.mediawiki.org/wiki/Extension:IPInfo",
	"license-name": "MIT",
	"version": "0.0.0",
	"namemsg": "ipinfo-extensionname",
	"descriptionmsg": "ipinfo-desc",
	"manifest_version": 2,
	"requires": {
		"MediaWiki": ">= 1.38.0"
	},
	"MessagesDirs": {
		"IPInfo": [ "i18n" ]
	},
	"type": "other",
	"AutoloadNamespaces": {
		"MediaWiki\\IPInfo\\": "src/"
	},
	"TestAutoloadNamespaces": {
		"MediaWiki\\IPInfo\\Test\\Integration\\": "tests/phpunit/integration",
		"MediaWiki\\IPInfo\\Test\\Unit\\": "tests/phpunit/unit"
	},
	"ServiceWiringFiles": [
		"src/ServiceWiring.php"
	],
	"AvailableRights": [
		"ipinfo",
		"ipinfo-view-basic",
		"ipinfo-view-full",
		"ipinfo-view-log"
	],
	"RevokePermissions": {
		"no-ipinfo": {
			"ipinfo": true,
			"ipinfo-view-basic": true,
			"ipinfo-view-full": true,
			"ipinfo-view-log": true
		}
	},
	"DefaultUserOptions": {
		"ipinfo-use-agreement": 0
	},
	"RestRoutes": [
		{
			"path": "/ipinfo/v0/revision/{id}",
			"method": "GET",
			"services": [
				"IPInfoInfoManager",
				"RevisionLookup",
				"PermissionManager",
				"UserOptionsLookup",
				"UserFactory",
				"JobQueueGroup"
			],
			"factory": "MediaWiki\\IPInfo\\Rest\\Handler\\RevisionHandler::factory"
		},
		{
			"path": "/ipinfo/v0/archivedrevision/{id}",
			"method": "GET",
			"services": [
				"IPInfoInfoManager",
				"DBLoadBalancer",
				"RevisionStore",
				"PermissionManager",
				"UserOptionsLookup",
				"UserFactory",
				"JobQueueGroup"
			],
			"factory": "MediaWiki\\IPInfo\\Rest\\Handler\\ArchivedRevisionHandler::factory"
		},
		{
			"path": "/ipinfo/v0/log/{id}",
			"method": "GET",
			"services": [
				"IPInfoInfoManager",
				"DBLoadBalancer",
				"PermissionManager",
				"UserOptionsLookup",
				"UserFactory",
				"JobQueueGroup"
			],
			"factory": "MediaWiki\\IPInfo\\Rest\\Handler\\LogHandler::factory"
		}
	],
	"Hooks": {
		"BeforePageDisplay": "popup",
		"SpecialContributionsBeforeMainOutput": "infobox",
		"GetPreferences": "preferences",
		"GetBetaFeaturePreferences": "betaFeature",
		"SaveUserOptions": "preferences",
		"LoadExtensionSchemaUpdates": "schema",
		"SpecialPageBeforeExecute": "infobox"
	},
	"HookHandlers": {
		"popup": {
			"class": "MediaWiki\\IPInfo\\HookHandler\\PopupHandler",
			"services": [
				"PermissionManager",
				"UserOptionsLookup"
			]
		},
		"infobox": {
			"class": "MediaWiki\\IPInfo\\HookHandler\\InfoboxHandler",
			"services": [
				"PermissionManager",
				"UserOptionsLookup"
			]
		},
		"preferences": {
			"class": "MediaWiki\\IPInfo\\HookHandler\\PreferencesHandler",
			"services": [
				"PermissionManager",
				"UserOptionsLookup",
				"UserGroupManager",
				"IPInfoLoggerFactory"
			]
		},
		"betaFeature": {
			"class": "MediaWiki\\IPInfo\\HookHandler\\BetaFeaturePreferencesHandler",
			"services": [
				"MainConfig",
				"PermissionManager"
			]
		},
		"schema": {
			"class": "MediaWiki\\IPInfo\\HookHandler\\SchemaHandler"
		}
	},
	"JobClasses": {
		"ipinfoLogIPInfoAccess": "\\MediaWiki\\IPInfo\\Jobs\\LogIPInfoAccessJob"
	},
	"ResourceModules": {
		"ext.ipInfo": {
			"localBasePath": "modules/ext.ipInfo",
			"remoteExtPath": "IPInfo/modules/ext.ipInfo",
			"packageFiles": [
				"dispatcher.js",
				"log.js",
				"infobox/init.js",
				"infobox/widget.js",
				"popup/init.js",
				"popup/widget.js",
				"widget.js"
			],
			"styles": [
				"ipinfo.less",
				"infobox/infobox.less",
				"popup/popup.less"
			],
			"targets": [
				"desktop"
			],
			"dependencies": [
				"mediawiki.api",
				"mediawiki.htmlform",
				"oojs-ui-core",
				"oojs-ui-widgets",
				"oojs-ui.styles.icons-content",
				"web2017-polyfills",
				"mediawiki.storage",
				"mediawiki.user"
			],
			"messages": [
				"ipinfo-source-geoip2",
				"ipinfo-infobox-title",
				"ipinfo-property-label-location",
				"ipinfo-property-label-isp",
				"ipinfo-property-label-asn",
				"ipinfo-property-label-organization",
				"ipinfo-property-label-connectiontype",
				"ipinfo-property-label-proxytypes",
				"ipinfo-property-label-ipversion",
				"ipinfo-property-tooltip-proxytypes",
				"ipinfo-property-value-connectiontype-cableordsl",
				"ipinfo-property-value-connectiontype-cellular",
				"ipinfo-property-value-connectiontype-corporate",
				"ipinfo-property-value-connectiontype-dialup",
				"ipinfo-property-value-usertype-college",
				"ipinfo-property-value-usertype-residential",
				"ipinfo-property-value-usertype-searchenginespider",
				"ipinfo-property-value-usertype-contentdeliverynetwork",
				"ipinfo-property-value-usertype-consumerprivacynetwork",
				"ipinfo-property-value-usertype-business",
				"ipinfo-property-value-usertype-cafe",
				"ipinfo-property-value-usertype-cellular",
				"ipinfo-property-value-usertype-dialup",
				"ipinfo-property-value-usertype-government",
				"ipinfo-property-value-usertype-hosting",
				"ipinfo-property-value-usertype-library",
				"ipinfo-property-value-usertype-military",
				"ipinfo-property-value-usertype-router",
				"ipinfo-property-value-usertype-school",
				"ipinfo-property-value-usertype-traveler",
				"ipinfo-property-value-proxytype-isanonymousvpn",
				"ipinfo-property-value-proxytype-ispublicproxy",
				"ipinfo-property-value-proxytype-isresidentialproxy",
				"ipinfo-property-value-proxytype-islegitimateproxy",
				"ipinfo-property-value-proxytype-istorexitnode",
				"ipinfo-property-value-proxytype-ishostingprovider",
				"ipinfo-property-label-usertype",
				"ipinfo-property-label-source",
				"ipinfo-property-label-active-blocks",
				"ipinfo-property-tooltip-connectiontype",
				"ipinfo-property-tooltip-usertype",
				"ipinfo-value-active-blocks",
				"ipinfo-property-label-edits",
				"ipinfo-value-local-edits",
				"ipinfo-value-recent-edits",
				"ipinfo-property-no-access",
				"ipinfo-property-no-data",
				"ipinfo-widget-error-default",
				"ipinfo-widget-error-no-data",
				"ipinfo-widget-error-wrong-ip",
				"ipinfo-widget-error-ip-no-edits",
				"ipinfo-infobox-use-terms",
				"ipinfo-preference-use-agreement",
				"ipinfo-infobox-submit-agreement",
				"ipinfo-use-agreement-submit-error",
				"ipinfo-infobox-disable-instructions",
				"ipinfo-preference-agreement-error",
				"ipinfo-value-ipversion-ipv4",
				"ipinfo-value-ipversion-ipv6",
				"ipinfo-property-tooltip-asn",
				"ipinfo-active-blocks-url-text",
				"ipinfo-blocklist-url-text"
			]
		},
		"ext.ipInfo.styles": {
			"localBasePath": "modules/ext.ipInfo.styles",
			"remoteExtPath": "IPInfo/modules/ext.ipInfo.styles",
			"styles": "init.less"
		}
	},
	"config": {
		"IPInfoGeoLite2Prefix": {
			"value": false,
			"description": "Path to the directory containing either GeoLite2- or GeoIP2- depending on database files downloaded; should contain prefix (GeoLite2-/GeoIP2-)"
		},
		"IPInfoGeoIP2EnterprisePath": {
			"value": false,
			"description": "Path to the directory containing the GeoIP2 Enterprise and Anonymous IP database file; should contain the trailing slash"
		}
	},
	"load_composer_autoloader": true,
	"LogTypes": [ "ipinfo" ],
	"LogNames": {
		"ipinfo": "ipinfo-log-name"
	},
	"LogHeaders": {
		"ipinfo": "ipinfo-log-header"
	},
	"LogActionsHandlers": {
		"ipinfo/*": "MediaWiki\\IPInfo\\Logging\\IPInfoLogFormatter"
	},
	"LogRestrictions": {
		"ipinfo": "ipinfo-view-log"
	},
	"ActionFilteredLogs": {
		"ipinfo": {
			"change_access": [ "change_access" ],
			"view_infobox": [ "view_infobox" ],
			"view_popup": [ "view_popup" ]
		}
	}
}
